<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Catch Multiple Balls Game</title>
 <link rel="icon" href="beach.png" type="image/svg+xml" style="border-radius: 50%;" width="96" height="96">
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    overflow-x: hidden;
    padding: 20px;
    animation: backgroundShift 15s infinite alternate;
  }
  
  @keyframes backgroundShift {
    0% { background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); }
    25% { background: linear-gradient(135deg, #6a11cb, #2575fc, #7b4397); }
    50% { background: linear-gradient(135deg, #fc466b, #3f5efb, #833ab4); }
    75% { background: linear-gradient(135deg, #11998e, #38ef7d, #56ab2f); }
    100% { background: linear-gradient(135deg, #ff512f, #dd2476, #ff9966); }
  }
  
  .back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 10px 20px;
    background: linear-gradient(90deg, #ff8a00, #e52e71);
    border: none;
    border-radius: 30px;
    color: white;
    font-size: 1rem;
    cursor: pointer;
    text-decoration: none;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    animation: buttonGlow 2s infinite alternate;
  }
  
  .back-button:hover {
    transform: scale(1.05);
    box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
  }
  
  .header {
    text-align: center;
    margin-bottom: 30px;
    animation: titlePulse 3s infinite alternate;
  }
  
  @keyframes titlePulse {
    0% { transform: scale(1); text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
    100% { transform: scale(1.05); text-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
  }
  
  .header h1 {
    font-size: 3rem;
    margin-bottom: 10px;
    background: linear-gradient(90deg, #ffd700, #ffed4e, #ffd700);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
  }
  
  .header p {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .main-content {
    display: flex;
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    flex: 1;
  }
  
  .instructions-panel {
    flex: 1;
    background: rgba(18, 18, 18, 0.9);
    border-radius: 20px;
    padding: 25px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    border: 2px solid #ffd700;
    animation: containerGlow 4s infinite alternate;
    max-height: 600px;
    overflow-y: auto;
  }
  
  .game-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  .game-container {
    position: relative;
    width: 100%;
    max-width: 500px;
    height: 70vh;
    max-height: 600px;
    background-color: rgba(18, 18, 18, 0.85);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    border: 3px solid #ffd700;
    animation: containerGlow 4s infinite alternate;
  }
  
  @keyframes containerGlow {
    0% { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3); }
    100% { box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 215, 0, 0.7); }
  }
  
  #game {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  
  .ball {
    position: absolute;
    border-radius: 50%;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    transition: transform 0.1s;
    animation: ballFloat 3s infinite alternate;
  }
  
  @keyframes ballFloat {
    0% { transform: translateY(0) rotate(0deg); }
    100% { transform: translateY(-5px) rotate(5deg); }
  }
  
  .ball.basketball {
    background: radial-gradient(circle at 30% 30%, #ff8c00, #8b4513);
    border: 2px solid #8b4513;
    animation: basketballBounce 0.5s infinite alternate;
  }
  
  @keyframes basketballBounce {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
  }
  
  .ball.soccer {
    background: radial-gradient(circle at 30% 30%, #ffffff, #000000);
    border: 2px solid #000000;
    animation: soccerSpin 3s infinite linear;
  }
  
  @keyframes soccerSpin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  .ball.tennis {
    background: radial-gradient(circle at 30% 30%, #ffff00, #008000);
    border: 2px solid #008000;
    animation: tennisBounce 0.8s infinite alternate;
  }
  
  @keyframes tennisBounce {
    0% { transform: translateY(0); }
    100% { transform: translateY(-3px); }
  }
  
  .ball.beach {
    background: radial-gradient(circle at 30% 30%, #ff69b4, #ff1493);
    border: 2px solid #ff1493;
    animation: beachFloat 2s infinite alternate;
  }
  
  @keyframes beachFloat {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  
  .ball.golf {
    background: radial-gradient(circle at 30% 30%, #ffffff, #006400);
    border: 2px solid #006400;
    animation: golfSpin 2s infinite linear;
  }
  
  @keyframes golfSpin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  #basket {
    position: absolute;
    bottom: 15px;
    width: 100px;
    height: 60px;
    background: linear-gradient(90deg, #8b4513, #a0522d, #8b4513);
    border-radius: 10px 10px 50% 50%;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    z-index: 10;
    transition: transform 0.1s;
    animation: basketSway 4s infinite alternate;
  }
  
  @keyframes basketSway {
    0% { transform: translateX(0); }
    100% { transform: translateX(5px); }
  }
  
  #basket::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 0;
    width: 100%;
    height: 15px;
    background: linear-gradient(90deg, #daa520, #ffd700, #daa520);
    border-radius: 10px 10px 0 0;
    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
  }
  
  #basket::after {
    content: '';
    position: absolute;
    top: -20px;
    left: 10px;
    width: 80px;
    height: 40px;
    border: 5px solid #daa520;
    border-bottom: none;
    border-radius: 50% 50% 0 0;
    box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.3);
  }
  
  #score-container {
    position: absolute;
    top: 15px;
    left: 15px;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px 20px;
    border-radius: 20px;
    border: 2px solid #ffd700;
    z-index: 20;
    backdrop-filter: blur(5px);
    animation: scorePulse 2s infinite alternate;
  }
  
  @keyframes scorePulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
  }
  
  #score {
    font-size: 1.5rem;
    font-weight: bold;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }
  
  #timer-container {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px 20px;
    border-radius: 20px;
    border: 2px solid #ffd700;
    z-index: 20;
    backdrop-filter: blur(5px);
    animation: timerPulse 2s infinite alternate;
  }
  
  @keyframes timerPulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
  }
  
  #timer {
    font-size: 1.5rem;
    font-weight: bold;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }
  
  #lives {
    position: absolute;
    top: 70px;
    left: 15px;
    display: flex;
    gap: 5px;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px;
    border-radius: 20px;
    border: 2px solid #ffd700;
    z-index: 20;
    backdrop-filter: blur(5px);
    animation: heartBeat 1.5s infinite alternate;
  }
  
  @keyframes heartBeat {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  
  .heart {
    color: #ff6b6b;
    font-size: 1.5rem;
    animation: heartPulse 1s infinite alternate;
  }
  
  @keyframes heartPulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.2); }
  }
  
  #game-over {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
    display: none;
    animation: fadeIn 0.5s ease-out;
  }
  
  @keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }
  
  #game-over h2 {
    font-size: 3rem;
    color: #ffd700;
    margin-bottom: 20px;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
    animation: gameOverText 2s infinite alternate;
  }
  
  @keyframes gameOverText {
    0% { transform: scale(1); text-shadow: 0 0 10px rgba(255, 215, 0, 0.7); }
    100% { transform: scale(1.1); text-shadow: 0 0 20px rgba(255, 215, 0, 0.9); }
  }
  
  #final-score {
    font-size: 2rem;
    margin-bottom: 30px;
    animation: scoreBounce 1s infinite alternate;
  }
  
  @keyframes scoreBounce {
    0% { transform: translateY(0); }
    100% { transform: translateY(-10px); }
  }
  
  #restart {
    padding: 12px 30px;
    font-size: 1.2rem;
    background: linear-gradient(90deg, #ff8a00, #e52e71);
    border: none;
    border-radius: 30px;
    color: white;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    animation: buttonGlow 2s infinite alternate;
  }
  
  @keyframes buttonGlow {
    0% { box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 10px rgba(255, 138, 0, 0.5); }
    100% { box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 138, 0, 0.8); }
  }
  
  #restart:hover {
    transform: scale(1.05);
    box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
  }
  
  #instructions {
    position: absolute;
    bottom: 10px;
    width: 100%;
    text-align: center;
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    padding: 0 10px;
    animation: instructionFade 3s infinite alternate;
  }
  
  @keyframes instructionFade {
    0% { opacity: 0.7; }
    100% { opacity: 1; }
  }
  
  .particle {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 5;
  }
  
  .timer-warning {
    animation: pulse 0.5s infinite alternate, shake 0.5s infinite;
  }
  
  @keyframes pulse {
    from { color: white; }
    to { color: #ff6b6b; }
  }
  
  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    50% { transform: translateX(5px); }
    75% { transform: translateX(-5px); }
    100% { transform: translateX(0); }
  }
  
  .floating-objects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
  }
  
  .floating-object {
    position: absolute;
    opacity: 0.7;
    animation: float 15s infinite linear;
  }
  
  @keyframes float {
    0% { transform: translateY(100vh) rotate(0deg); }
    100% { transform: translateY(-100px) rotate(360deg); }
  }

  /* Instructions Panel Styles */
  .instructions-panel h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #ffd700;
    font-size: 1.8rem;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }

  .instructions-content {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .instruction-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 10px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.1);
    transition: transform 0.3s ease;
  }

  .instruction-item:hover {
    transform: translateX(5px);
    background: rgba(255, 255, 255, 0.15);
  }

  .instruction-icon {
    font-size: 1.5rem;
    min-width: 30px;
    text-align: center;
  }

  .instruction-text {
    flex: 1;
  }

  .instruction-text h3 {
    color: #ffd700;
    margin-bottom: 5px;
    font-size: 1.1rem;
  }

  .instruction-text p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.95rem;
    line-height: 1.4;
  }

  .ball-points {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
    justify-content: center;
  }

  .point-item {
    display: flex;
    align-items: center;
    gap: 5px;
    background: rgba(255, 255, 255, 0.1);
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.9rem;
  }

  .point-ball {
    width: 15px;
    height: 15px;
    border-radius: 50%;
  }

  .point-ball.basketball {
    background: radial-gradient(circle at 30% 30%, #ff8c00, #8b4513);
  }

  .point-ball.soccer {
    background: radial-gradient(circle at 30% 30%, #ffffff, #000000);
  }

  .point-ball.tennis {
    background: radial-gradient(circle at 30% 30%, #ffff00, #008000);
  }

  .point-ball.beach {
    background: radial-gradient(circle at 30% 30%, #ff69b4, #ff1493);
  }

  .point-ball.golf {
    background: radial-gradient(circle at 30% 30%, #ffffff, #006400);
  }

  .controls-info {
    display: flex;
    justify-content: space-around;
    margin-top: 15px;
    flex-wrap: wrap;
    gap: 15px;
  }

  .control-item {
    text-align: center;
    background: rgba(255, 255, 255, 0.1);
    padding: 10px 15px;
    border-radius: 10px;
    flex: 1;
    min-width: 120px;
  }

  .control-icon {
    font-size: 1.8rem;
    margin-bottom: 5px;
  }

  .control-text {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.9);
  }

  @media (max-width: 900px) {
    .main-content {
      flex-direction: column;
    }
    
    .instructions-panel {
      max-height: none;
      margin-bottom: 20px;
    }
    
    .game-container {
      height: 60vh;
    }
  }
  
  @media (max-width: 600px) {
    .header h1 {
      font-size: 2.5rem;
    }
    
    .header p {
      font-size: 1rem;
    }
    
    #basket {
      width: 80px;
      height: 50px;
    }
    
    #basket::after {
      width: 60px;
      height: 30px;
    }
    
    #score, #timer, .heart {
      font-size: 1.2rem;
    }
    
    #game-over h2 {
      font-size: 2.5rem;
    }
    
    #final-score {
      font-size: 1.8rem;
    }
    
    #lives {
      top: 60px;
    }
    
    .back-button {
      top: 10px;
      left: 10px;
      padding: 8px 16px;
      font-size: 0.9rem;
    }

    .instructions-panel {
      padding: 20px;
    }

    .instructions-panel h2 {
      font-size: 1.5rem;
    }

    .controls-info {
      flex-direction: column;
    }
  }
</style>
</head>
<body>
  <a href="index.html" class="back-button">‚Üê</a>
  
  <div class="header">
    <h1>Catch the Balls!</h1>
    <p>Move the basket to catch as many balls as you can before time runs out!</p>
  </div>
  
  <div class="main-content">
    <!-- Instructions Panel on the Left -->
    <div class="instructions-panel">
      <h2>How to Play</h2>
      <div class="instructions-content">
        <div class="instruction-item">
          <div class="instruction-icon">üéØ</div>
          <div class="instruction-text">
            <h3>Objective</h3>
            <p>Catch as many balls as possible with your basket before time runs out!</p>
          </div>
        </div>
        
        <div class="instruction-item">
          <div class="instruction-icon">‚è±Ô∏è</div>
          <div class="instruction-text">
            <h3>Time Limit</h3>
            <p>You have 30 seconds to catch as many balls as you can. The timer will turn red and shake when time is running out!</p>
          </div>
        </div>
        
        <div class="instruction-item">
          <div class="instruction-icon">‚ù§Ô∏è</div>
          <div class="instruction-text">
            <h3>Lives</h3>
            <p>You start with 3 lives. You lose a life every time a ball falls past your basket. Game ends when all lives are lost.</p>
          </div>
        </div>
        
        <div class="instruction-item">
          <div class="instruction-icon">üèÄ</div>
          <div class="instruction-text">
            <h3>Ball Points</h3>
            <p>Different balls give different points:</p>
            <div class="ball-points">
              <div class="point-item">
                <div class="point-ball basketball"></div>
                <span>Basketball: 2 points</span>
              </div>
              <div class="point-item">
                <div class="point-ball soccer"></div>
                <span>Soccer: 1 point</span>
              </div>
              <div class="point-item">
                <div class="point-ball tennis"></div>
                <span>Tennis: 1 point</span>
              </div>
              <div class="point-item">
                <div class="point-ball beach"></div>
                <span>Beach: 3 points</span>
              </div>
              <div class="point-item">
                <div class="point-ball golf"></div>
                <span>Golf: 1 point</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="instruction-item">
          <div class="instruction-icon">üéÆ</div>
          <div class="instruction-text">
            <h3>Controls</h3>
            <p>Use any of these methods to move your basket:</p>
            <div class="controls-info">
              <div class="control-item">
                <div class="control-icon">üñ±Ô∏è</div>
                <div class="control-text">Mouse Movement</div>
              </div>
              <div class="control-item">
                <div class="control-icon">üëÜ</div>
                <div class="control-text">Touch Screen</div>
              </div>
              <div class="control-item">
                <div class="control-icon">üì±</div>
                <div class="control-text">Tilt Device</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="instruction-item">
          <div class="instruction-icon">‚≠ê</div>
          <div class="instruction-text">
            <h3>Tips</h3>
            <p>Focus on catching the high-point beach balls, but don't miss the easier ones. Watch for balls bouncing off the walls!</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Game Section on the Right -->
    <div class="game-section">
      <div class="game-container">
        <div id="game">
          <div id="score-container">
            <div id="score">Score: 0</div>
          </div>
          <div id="timer-container">
            <div id="timer">30s</div>
          </div>
          <div id="lives">
            <span class="heart">‚ù§Ô∏è</span>
            <span class="heart">‚ù§Ô∏è</span>
            <span class="heart">‚ù§Ô∏è</span>
          </div>
          <div id="basket"></div>
          <div id="instructions">Move your device or use mouse to catch the balls!</div>
          <div id="game-over">
            <h2>Game Over</h2>
            <div id="final-score">Score: 0</div>
            <button id="restart">Play Again</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="floating-objects" id="floatingObjects"></div>

  <!-- Hidden audio elements for sound effects -->
  <audio id="catchSound" preload="auto">
    <source src="./soccer-ball-kick-37625.mp3" type="audio/mpeg">
  </audio>
  <audio id="gameOverSound" preload="auto">
    <source src="./game-over-arcade-6435.mp3" type="audio/mpeg">
  </audio>
  

<script>
  const game = document.getElementById("game");
  const basket = document.getElementById("basket");
  const scoreEl = document.getElementById("score");
  const timerEl = document.getElementById("timer");
  const finalScoreEl = document.getElementById("final-score");
  const livesEl = document.getElementById("lives");
  const gameOverScreen = document.getElementById("game-over");
  const restartBtn = document.getElementById("restart");
  const floatingObjects = document.getElementById("floatingObjects");
  
  // Audio elements
  const catchSound = document.getElementById("catchSound");
  const gameOverSound = document.getElementById("gameOverSound");
  const timerSound = document.getElementById("timerSound");

  const gameWidth = game.offsetWidth;
  const gameHeight = game.offsetHeight;
  const basketWidth = basket.offsetWidth;

  let basketX = (gameWidth - basketWidth) / 2;
  basket.style.left = basketX + "px";

  // Game settings
  const GAME_DURATION = 30; // 30 seconds
  let timeLeft = GAME_DURATION;
  let timerInterval;

  // Create floating background objects
  function createFloatingObjects() {
    const objects = ['üèÄ', '‚öΩ', 'üéæ', 'üèê', '‚õ≥'];
    for (let i = 0; i < 15; i++) {
      const obj = document.createElement('div');
      obj.classList.add('floating-object');
      obj.textContent = objects[Math.floor(Math.random() * objects.length)];
      obj.style.left = Math.random() * 100 + 'vw';
      obj.style.fontSize = (Math.random() * 30 + 20) + 'px';
      obj.style.animationDuration = (Math.random() * 20 + 10) + 's';
      obj.style.animationDelay = Math.random() * 5 + 's';
      floatingObjects.appendChild(obj);
    }
  }

  // Ball types with different properties
  const ballTypes = [
    { 
      type: "basketball", 
      size: 30, 
      speed: 3, 
      color: "#ff8c00",
      points: 2
    },
    { 
      type: "soccer", 
      size: 28, 
      speed: 4, 
      color: "#ffffff",
      points: 1
    },
    { 
      type: "tennis", 
      size: 25, 
      speed: 5, 
      color: "#ffff00",
      points: 1
    },
    { 
      type: "beach", 
      size: 32, 
      speed: 2.5, 
      color: "#ff69b4",
      points: 3
    },
    { 
      type: "golf", 
      size: 20, 
      speed: 6, 
      color: "#ffffff",
      points: 1
    }
  ];

  // Ball class to manage individual balls
  class Ball {
    constructor() {
      const ballType = ballTypes[Math.floor(Math.random() * ballTypes.length)];
      this.type = ballType.type;
      this.size = ballType.size;
      this.speedY = ballType.speed + Math.random() * 1.5;
      this.speedX = (Math.random() - 0.5) * 2; // slight horizontal movement
      this.points = ballType.points;
      
      this.x = Math.random() * (gameWidth - this.size);
      this.y = -this.size;
      
      this.element = document.createElement("div");
      this.element.classList.add("ball", this.type);
      this.element.style.width = this.size + "px";
      this.element.style.height = this.size + "px";
      
      this.updatePosition();
      game.appendChild(this.element);
    }
    
    updatePosition() {
      this.element.style.left = this.x + "px";
      this.element.style.top = this.y + "px";
    }
    
    move() {
      this.y += this.speedY;
      this.x += this.speedX;
      
      // Bounce off walls
      if (this.x <= 0 || this.x >= gameWidth - this.size) {
        this.speedX *= -1;
      }
      
      this.updatePosition();
    }
    
    outOfBounds() {
      return this.y > gameHeight;
    }
    
    remove() {
      if (this.element.parentNode) {
        game.removeChild(this.element);
      }
    }
  }

  let balls = [];
  let score = 0;
  let lives = 3;
  const maxBalls = 7; // number of balls on screen at once
  let gameRunning = true;
  let lastSpawnTime = 0;
  const spawnInterval = 800; // ms between spawns

  function startTimer() {
    timeLeft = GAME_DURATION;
    timerEl.textContent = `${timeLeft}s`;
    timerEl.classList.remove("timer-warning");
    
    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      timeLeft--;
      timerEl.textContent = `${timeLeft}s`;
      
      // Add warning effect when time is running out
      if (timeLeft <= 5) {
        timerEl.classList.add("timer-warning");
        
        // Play timer sound for last 5 seconds
        if (timeLeft < 5) {
          try {
            timerSound.currentTime = 0;
            timerSound.play().catch(e => console.log("Audio play failed:", e));
          } catch (e) {
            console.log("Audio error:", e);
          }
        }
      }
      
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        endGame();
      }
    }, 1000);
  }

  function spawnBalls(timestamp) {
    if (!gameRunning) return;
    
    if (timestamp - lastSpawnTime > spawnInterval) {
      if (balls.length < maxBalls) {
        balls.push(new Ball());
      }
      lastSpawnTime = timestamp;
    }
    
    requestAnimationFrame(spawnBalls);
  }

  function createParticles(x, y, color, count) {
    for (let i = 0; i < count; i++) {
      const particle = document.createElement("div");
      particle.classList.add("particle");
      particle.style.backgroundColor = color;
      particle.style.left = x + "px";
      particle.style.top = y + "px";
      game.appendChild(particle);
      
      const angle = Math.random() * Math.PI * 2;
      const speed = 2 + Math.random() * 3;
      const vx = Math.cos(angle) * speed;
      const vy = Math.sin(angle) * speed;
      
      let opacity = 1;
      const fadeInterval = setInterval(() => {
        opacity -= 0.05;
        particle.style.opacity = opacity;
        particle.style.left = parseFloat(particle.style.left) + vx + "px";
        particle.style.top = parseFloat(particle.style.top) + vy + "px";
        
        if (opacity <= 0) {
          clearInterval(fadeInterval);
          if (particle.parentNode) {
            game.removeChild(particle);
          }
        }
      }, 50);
    }
  }

  function update() {
    if (!gameRunning) return;
    
    balls.forEach((ball, index) => {
      ball.move();

      // Detect collision with basket
      if (
        ball.y + ball.size >= gameHeight - 75 && // ball bottom near basket top
        ball.x + ball.size >= basketX &&
        ball.x <= basketX + basketWidth
      ) {
        score += ball.points;
        scoreEl.textContent = `Score: ${score}`;
        
        // Play catch sound
        try {
          catchSound.currentTime = 0;
          catchSound.play().catch(e => console.log("Audio play failed:", e));
        } catch (e) {
          console.log("Audio error:", e);
        }
        
        // Create particle effect
        createParticles(
          ball.x + ball.size/2, 
          ball.y + ball.size/2, 
          getComputedStyle(ball.element).backgroundColor,
          10
        );
        
        // Add catch animation to basket
        basket.style.transform = "scale(1.1)";
        setTimeout(() => {
          basket.style.transform = "scale(1)";
        }, 100);
        
        ball.remove();
        balls.splice(index, 1);
      } else if (ball.outOfBounds()) {
        // Remove balls that are missed and fell out of screen
        if (ball.y > gameHeight + 50) {
          lives--;
          updateLives();
          ball.remove();
          balls.splice(index, 1);
        }
      }
    });

    requestAnimationFrame(update);
  }

  function updateLives() {
    const hearts = livesEl.querySelectorAll(".heart");
    hearts.forEach((heart, index) => {
      if (index < lives) {
        heart.style.display = "inline";
      } else {
        heart.style.display = "none";
      }
    });
    
    if (lives <= 0) {
      endGame();
    }
  }

  function endGame() {
    gameRunning = false;
    clearInterval(timerInterval);
    
    // Play game over sound
    try {
      gameOverSound.currentTime = 0;
      gameOverSound.play().catch(e => console.log("Audio play failed:", e));
    } catch (e) {
      console.log("Audio error:", e);
    }
    
    finalScoreEl.textContent = `Score: ${score}`;
    gameOverScreen.style.display = "flex";
  }

  function restartGame() {
    // Remove all balls
    balls.forEach(ball => ball.remove());
    balls = [];
    
    // Reset game state
    score = 0;
    lives = 3;
    gameRunning = true;
    
    // Update UI
    scoreEl.textContent = `Score: ${score}`;
    updateLives();
    gameOverScreen.style.display = "none";
    
    // Restart timer and game loops
    startTimer();
    requestAnimationFrame(spawnBalls);
    requestAnimationFrame(update);
  }

  // Mouse controls for desktop
  game.addEventListener("mousemove", (e) => {
    if (!gameRunning) return;
    
    const rect = game.getBoundingClientRect();
    basketX = e.clientX - rect.left - basketWidth / 2;
    if (basketX < 0) basketX = 0;
    if (basketX > gameWidth - basketWidth) basketX = gameWidth - basketWidth;
    basket.style.left = basketX + "px";
  });

  // Touch controls for mobile
  game.addEventListener("touchmove", (e) => {
    if (!gameRunning) return;
    
    e.preventDefault();
    const rect = game.getBoundingClientRect();
    const touch = e.touches[0];
    basketX = touch.clientX - rect.left - basketWidth / 2;
    if (basketX < 0) basketX = 0;
    if (basketX > gameWidth - basketWidth) basketX = gameWidth - basketWidth;
    basket.style.left = basketX + "px";
  });

  // Device orientation controls for mobile
  window.addEventListener("deviceorientation", (e) => {
    if (!gameRunning) return;
    
    // Use gamma (left-right tilt) to control basket
    const tilt = e.gamma; // -90 to 90 degrees
    const sensitivity = 2;
    
    basketX += tilt / sensitivity;
    if (basketX < 0) basketX = 0;
    if (basketX > gameWidth - basketWidth) basketX = gameWidth - basketWidth;
    basket.style.left = basketX + "px";
  });

  restartBtn.addEventListener("click", restartGame);

  // Start the game
  createFloatingObjects();
  updateLives();
  startTimer();
  requestAnimationFrame(spawnBalls);
  requestAnimationFrame(update);
</script>
</body>

</html>
